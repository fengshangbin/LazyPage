/*!
 *  lazypage.js 
 *  by fengshangbin 2019-01-10 
 *  https://github.com/fengshangbin/LazyPage 
 *  Easy H5 Page Framework
 */
var LazyPage=function(t){var e={};function n(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=1)}([function(t,e,n){var a,r=new(n(3)),i=function t(e){r.trigger(),document.removeEventListener?document.removeEventListener("DOMContentLoaded",t,!1):document.attachEvent&&(document.detachEvent("onreadystatechange",t),window==window.top&&(clearInterval(a),a=null))};document.addEventListener?document.addEventListener("DOMContentLoaded",i,!1):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){/loaded|complete/.test(document.readyState)&&i()}),window==window.top&&(a=setInterval(function(){try{document.documentElement.doScroll("left")}catch(t){return}i()},5))),t.exports=r.bind},function(t,e,n){t.exports=n(4)},function(t,e,n){},function(t,e){t.exports=function(){var t=!1,e=[];this.bind=function(n){t?n.call(window):e.push(n)},this.trigger=function(){if(!t){t=!0;for(var n=0;n<e.length;n++)e[n].apply(window);e=null}}}},function(t,e,n){"use strict";n.r(e);n(2);function a(){var t={type:arguments[0].type||"GET",url:arguments[0].url||"",async:arguments[0].async||"true",data:arguments[0].data||null,dataType:arguments[0].dataType||"text",header:arguments[0].header||null,contentType:arguments[0].contentType||"application/x-www-form-urlencoded",beforeSend:arguments[0].beforeSend||function(){},success:arguments[0].success||function(){},error:arguments[0].error||function(){}};t.beforeSend();var e=new XMLHttpRequest;if("get"==t.type.toLowerCase()&&null!=t.data&&""!=t.data&&(t.url+=t.url.indexOf("?")>0?"&":"?",t.url+=t.data),e.open(t.type,t.url,t.async),e.setRequestHeader("Content-Type",t.contentType),null!=t.header)for(var n in t.header)e.setRequestHeader(n,t.header[n]);e.send("post"==t.type.toLowerCase()&&null!=t.data?t.data:null),e.onreadystatechange=function(){4==e.readyState&&(200==e.status?t.success(e.responseText):t.error(e.status))}}function r(t,e,n){if(t&&t.length>0){if("string"==typeof t)return!!e.classList.contains(t);for(var a=0,r=0;r<t.length;r++)e.classList.contains(t[r])&&a++;return a==t.length}return!0}function i(){return this.data=[],this.addClass=function(t){for(var e=0;e<this.data.length;e++)this.data[e].classList.add(t)},this.removeClass=function(t){for(var e=0;e<this.data.length;e++)this.data[e].classList.remove(t)},this.hasClass=function(t){for(var e=0;e<this.data.length;e++)if(this.data[e].classList.contains(t))return!0;return!1},this.hide=function(){for(var t=0;t<this.data.length;t++)this.data[t].style.display="none"},this}function o(t,e){var n={};for(var a in t)n[a]=t[a];for(var r in e)n[r]=e[r];return n}Element.prototype.getParentElementByTag=function(t){if(!t)return null;var e=null,n=this;return function a(){if(!(n=n.parentElement))return null;var r=n.tagName.toLowerCase();r===t?e=n:"body"==r?e=null:a()}(),e},Element.prototype.hasLazyPageParent=function(t){var e=!1,n=this;return function a(){(n=n.parentElement)==t?e=!1:n.classList.contains("lazypage")?e=!0:a()}(),e},Element.prototype.siblings=function(t,e){for(var n=new i,a=this.parentElement.children,o=0;o<a.length;o++){var s=a[o];(s!=this||e)&&(r(t,s)&&n.data.push(s))}return n},Element.prototype.childrens=function(t){for(var e=new i,n=this.children,a=0;a<n.length;a++){var o=n[a];r(t,o)&&e.data.push(o)}return e};var s=location.origin;function l(t){return t.replace(s,"")}function u(t,e){this.type=t,this.data=e,this.target=null}function c(t,e){var n,a=t.replace(/(\?.*)|(#.*)/,"").split("/").filter(function(t){return t.length>0}),r=e.replace(/(\?.*)|(#.*)/,"").split("/").filter(function(t){return t.length>0});if(a.join("/")==r.join("/"))return null;for(n=0;n<a.length&&n<r.length&&a[n]==r[n];n++);var i=p(n,a);if(null==i)return null;var o=p(n,r),s=r.slice(n+1),l=f(n,r),u=function(t,e){if(0==e.length||null==t)return null;var n=f(e.length-1,e),a=v(t,n);return a.length<n.split(" ").length?n:null}(o,s);return{current:i,target:o,targetSelector:u?l+" "+u:l,sun:s,ajaxSun:!!u}}function d(t){var e=h(t,".in");return e?d(e):t}function f(t,e){var n,a=0==t?"":'[data-page="'+e.slice(0,t).join('"] [data-page="')+'"]';return n=t>e.length-1?".default":'[data-page="'+e[t]+'"]',a+(0==a.length?"":" ")+n}function p(t,e){var n=f(t,e),a=v(null,n);return a.length==n.split(" ").length?a[a.length-1]:null}function h(t,e){for(var n=t.querySelectorAll(".lazypage"+e),a=0;a<n.length;a++)if(0==n[a].hasLazyPageParent(t))return n[a];return null}function v(t,e){null==t&&(t=document.body);for(var n=e.split(" "),a=[],r=0;r<n.length;r++){var i=h(t,n[r]);if(!i)return a;a.push(i),t=i}return a}null==s&&(s=/^((https|http|ftp|rtsp|mms)?:\/\/[^\/]*)/i.exec(location.href)[0]);var g=new function(){var t={};this.addEventListener=function(e,n){null==t[e]&&(t[e]=[]),-1==t[e].indexOf(n)&&t[e].push(n)},this.removeEventListener=function(e,n){if(null==t[e]&&(t[e]=[]),null==n)t[e].length>0&&(t[e]=[]);else{var a=t[e].indexOf(n);a>-1&&t[e].splice(a,1)}},this.dispatchEvent=function(e){if(e.target=this,null!=t[e.type])for(var n=0;n<t[e.type].length;n++)t[e.type][n](e)},this.hasEventListener=function(e){return null==t[e]&&(t[e]=[]),t[e].length>0}},m=g.addEventListener,y=g.removeEventListener,E=g.hasEventListener,L={PAGE_FIRST_IN:"PageFirstIn",PAGE_IN_START:"PageInStart",PAGE_IN_END:"PageInEnd",PAGE_OUT_START:"PageOutStart",PAGE_OUT_END:"PageOutEnd"};function b(t,e){var n=d(t);n.hasPageFirstIn||(g.dispatchEvent(new u(L.PAGE_FIRST_IN,o(e,{page:n}))),n.hasPageFirstIn=!0),g.dispatchEvent(new u(L.PAGE_IN_START,o(e,{page:n}))),t.classList.contains("in")&&"onPageLoadShow"==e.animate?g.dispatchEvent(new u(L.PAGE_IN_END,o(e,{page:n}))):(t.style.display="block",e.isBack&&t.classList.add("reverse"),t.classList.remove("out"),t.classList.add(e.animate),t.classList.add("in"),w(t,n,e,L.PAGE_IN_END))}function w(t,e,n,a){t.addEventListener("animationend",function r(i){t.classList.remove("reverse");t.classList.remove(n.animate);t.classList.contains("out")&&(t.style.display="none");t.removeEventListener("animationend",r);g.dispatchEvent(new u(a,o(n,{page:e})))})}var S=l(location.href),P="pushState"in history&&"replaceState"in history;function A(t,e){if(!P)return!1;if(t=l(t),/^https?:\/\//i.test(t))return!1;var n=c(S,t);if(null==n)return!1;var r=n.current,i=n.target;return"popup"==r.getAttribute("data-animate")&&(e.animate="popup",e.isBack=!0),"auto"==e.animate&&(e.animate=null!=i?i.getAttribute("data-animate")||"slide":r.getAttribute("data-animate")||"slide"),null==i||n.ajaxSun?a({url:t,data:"lazypageTargetSelector="+encodeURIComponent(n.targetSelector),success:function(a){if((a=JSON.parse(a)).hasTargetLazyPage){for(var o,s=a.block,l=/data-sort *= *"([0-9])*"/i.exec(s),u=l?parseFloat(l[1]):0,c=i?i.childrens("lazypage"):r.siblings("lazypage",!0),f=0;f<c.data.length;f++){var p=c.data[f];if(u<parseFloat(p.getAttribute("data-sort")||"0")){p.insertAdjacentHTML("beforebegin",s),o=p.previousSibling||p.previousElementSibling;break}f==c.data.length-1&&(p.insertAdjacentHTML("afterend",s),o=p.nextSibling||p.nextElementSibling)}d(o).setAttribute("data-title",a.title.replace(/<\/?title>/gi,"")),null==i&&(i=o),T(t,r,i,n.sun,e)}else location.href=t},error:function(t){console.log("error",t)}}):T(t,r,i,n.sun,e),!0}function T(t,e,n,a,r){"string"==typeof r.isBack&&("auto"===r.isBack?r.isBack=4==n.compareDocumentPosition(e):r.isBack="true"===r.isBack),e!=n&&(!function(t,e){var n=d(t);g.dispatchEvent(new u(L.PAGE_OUT_START,o(e,{page:n}))),t.style.display="block",e.isBack&&t.classList.add("reverse"),t.classList.remove("in"),t.classList.add(e.animate),t.classList.add("out"),w(t,n,e,L.PAGE_OUT_END)}(e,r),b(n,r));var i,s=function(t,e){var n=t;if(e.length>0){var a=v(t,f(e.length-1,e));if(a.length>0){n=a[a.length-1];for(var r=0;r<a.length;r++){var i=a[r].siblings(["lazypage","in"]);i.addClass("out"),i.removeClass("in"),i.hide(),a[r].classList.add("in"),a[r].classList.remove("out"),a[r].style.display="block"}}}return n}(n,a);!function t(e){var n=h(e,".default");n&&0==n.siblings(["lazypage","in"]).data.length&&(n.classList.contains("out")&&(n.classList.add("in"),n.classList.remove("out"),n.style.display="block"),t(n))}(s),(i=d(s).getAttribute("data-title"))&&(document.title=i);var c=function t(e,n){var a=h(n,".in:not(.default)");return a?t(e+"/"+a.getAttribute("data-page"),a):e=e.replace("//","/")}(t,s);!function(t,e){var n=l(location.href);if(e.history){null==k&&(k={path:n});var a={animate:e.animate,isBack:e.isBack,path:t,prev:{animate:k.animate,isBack:k.isBack,path:k.path}};k.next={animate:a.animate,isBack:a.isBack,path:a.path},window.history.replaceState(k,null,n),window.history.pushState(a,null,t),k=a}}(c,r),S=c}var k=null;var _=n(0),x=n.n(_);function B(t,e){A(t,e=o({history:!0,isBack:!1,animate:"auto"},e))||(location.href=t)}document.addEventListener("click",function(t){var e=t.target;if(e&&("a"==e.tagName.toLowerCase()||(e=e.getParentElementByTag("a")))){var n=e.href;if(/^javascript/.test(n))return!1;if("true"==e.getAttribute("data-direct"))return!1;var a=e.getAttribute("data-animate")||"auto",r=e.getAttribute("data-back")||"auto";A(n,{history:"true"===(e.getAttribute("data-history")||"true"),isBack:r,animate:a})&&t.preventDefault()}}),window.onpopstate=function(){var t,e=(t=history.state).prev&&S==t.prev.path?(k=t,{history:!1,isBack:t.isBack,animate:t.animate}):t.next&&S==t.next.path?(k=t,{history:!1,isBack:!t.next.isBack,animate:t.next.animate}):(console.log("-------------error-----------"),null);e?A(location.href,e):location.reload()},x()(function(){var t=d(document.body);t&&(t.setAttribute("data-title",document.title),b(t,{isBack:!1,animate:"onPageLoadShow"}))}),n.d(e,"goto",function(){return B}),n.d(e,"addEventListener",function(){return m}),n.d(e,"removeEventListener",function(){return y}),n.d(e,"hasEventListener",function(){return E}),n.d(e,"PageEvent",function(){return L})}]);